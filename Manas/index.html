<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Happy Birthday</title>
<style>
  :root{
    --bg1: #ff9a9e;
    --bg2: #fad0c4;
    --card-bg: rgba(255,255,255,0.95);
    --accent: #ff6b6b;
    --muted: #4b5563;
  }
  html,body{height:100%}
  body{
    margin:0;
    font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    background: linear-gradient(135deg,var(--bg1),var(--bg2));
    display:flex;
    align-items:center;
    justify-content:center;
    overflow:hidden;
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
  }

  #confetti { position:fixed; inset:0; pointer-events:none; z-index:0; }

  .scene{
    position:relative;
    z-index:2;
    width:min(980px,94vw);
    padding:32px;
    border-radius:18px;
    background: linear-gradient(180deg, rgba(255,255,255,0.95), var(--card-bg));
    box-shadow: 0 10px 30px rgba(14,30,37,0.15);
    display:grid;
    grid-template-columns: 1fr 360px;
    gap:24px;
    align-items:center;
    min-height:420px;
    backdrop-filter: blur(4px) saturate(1.05);
  }

  @media (max-width:860px){
    .scene{grid-template-columns:1fr; padding:20px}
  }

  .left{ padding:12px 6px; }
  h1{ margin:0 0 6px 0; font-size: clamp(28px, 4vw, 44px); letter-spacing:-0.02em; color: #111827; }
  .subtitle{ margin:0 0 14px 0; color:var(--muted); font-size: clamp(14px, 2.2vw, 16px); }

  .message{
    background: linear-gradient(90deg, rgba(255,235,238,0.6), rgba(255,247,237,0.6));
    padding:16px;
    border-radius:12px;
    color:#111827;
    box-shadow: inset 0 1px 0 rgba(255,255,255,0.6);
    line-height:1.5;
    font-size:16px;
  }

  .cta-row{ margin-top:18px; display:flex; gap:12px; flex-wrap:wrap; }

  .btn{
    border:0;
    background:linear-gradient(90deg,#ff7a7a,#ffb199);
    color:white;
    padding:10px 16px;
    border-radius:10px;
    font-weight:600;
    cursor:pointer;
    box-shadow: 0 6px 18px rgba(255,107,107,0.18);
  }

  .btn-outline{
    background:transparent;
    color:var(--accent);
    border:2px solid rgba(255,107,107,0.12);
    box-shadow:none;
  }

  /* new action buttons */
  .action-row{ margin-top:12px; display:flex; gap:10px; flex-wrap:wrap; }
  .btn-secondary{
    background:linear-gradient(90deg,#ffd166,#ffb199);
    color:#111827;
    padding:8px 12px;
    border-radius:8px;
    font-weight:600;
    border:0;
    cursor:pointer;
  }

  .right{ display:flex; align-items:center; justify-content:center; position:relative; }

/* cake and animation */
  .cake { width:260px; max-width:86%; filter: drop-shadow(0 10px 20px rgba(15,23,42,0.15)); transform-origin:center bottom; animation: pop 900ms cubic-bezier(.2,.9,.2,1); }
  @keyframes pop { from { transform: translateY(18px) scale(.98); opacity:0 } to { transform: translateY(0) scale(1); opacity:1 } }

  .balloon{ position:absolute; width:54px;height:72px;border-radius:999px; bottom:6%; opacity:0.98; transform-origin:center bottom; animation: float 6s ease-in-out infinite; box-shadow: inset 0 -6px 14px rgba(255,255,255,0.12); }
  .balloon::after{ content:""; position:absolute; bottom:-28px; left:50%; transform:translateX(-50%); width:2px;height:28px; background:rgba(30,30,30,0.08); }
  .b1{ left:8%; background:linear-gradient(180deg,#ffd166,#ff9f1c); animation-delay:0s; animation-duration:5.6s }
  .b2{ left:28%; background:linear-gradient(180deg,#9b5de5,#7b2cbf); animation-delay:-1s; animation-duration:6.2s; }
  .b3{ right:8%; background:linear-gradient(180deg,#06d6a0,#06b58f); animation-delay:-0.6s; animation-duration:5.2s }
  .b4{ right:22%; background:linear-gradient(180deg,#ff6b6b,#ff8fab); animation-delay:-1.6s; animation-duration:6.6s }

  @keyframes float{ 0% { transform: translateY(0) rotate(-2deg) } 50% { transform: translateY(-26px) rotate(4deg) } 100% { transform: translateY(0) rotate(-2deg) } }

  .footer{ margin-top:14px; font-size:13px;color:var(--muted); }

  /* flame flicker & extinguished state */
  .flame { transform-origin:center bottom; transition: transform 600ms cubic-bezier(.2,.9,.2,1), opacity 600ms ease; animation: flicker 420ms infinite; filter: drop-shadow(0 4px 8px rgba(255,140,100,0.18)); }
  @keyframes flicker {
    0%{ transform: translateY(0) scaleY(1)}
    50%{ transform: translateY(-1px) scaleY(0.98)}
    100%{ transform: translateY(0) scaleY(1)}
  }
  .extinguished .flame{ transform: scaleY(0); opacity:0; animation: none; filter:none; }

  /* cake slice group (initially hidden) */
  #slice { transform-origin: left center; transition: transform 900ms cubic-bezier(.2,.9,.2,1), opacity 700ms ease; }

  /* when slice removed */
  .slice-removed #slice { transform: translateX(70px) rotate(-18deg); opacity:1; }
  .slice-removed .cake-layer { opacity:0.9; }

  /* crumb / sparkle */
  .crumb{ width:8px;height:8px;border-radius:50%; position:absolute; opacity:0; transform:translateY(0) scale(0.6); transition: transform 700ms cubic-bezier(.2,.9,.2,1), opacity 700ms ease; }
  .crumb.show{ opacity:1; transform: translateY(-24px) scale(1); }

  .shadow{ position:absolute; bottom:6%; width:180px; height:22px; border-radius:999px; background: radial-gradient(closest-side, rgba(13,18,25,0.12), rgba(13,18,25,0.04)); filter: blur(6px); transform:translateY(10px); }
  @media (max-width:480px){ .scene{padding:18px;border-radius:12px} .right{padding-top:8px} }
</style>
</head>
<body>
<canvas id="confetti"></canvas>

<div class="scene" role="main" aria-labelledby="greetingTitle">
  <div class="left">
    <h1 id="greetingTitle">Happy Birthday, <span id="name">Friend</span> üéâ</h1>
    <p class="subtitle" id="subtitle">Wishing you joy, laughter and beautiful surprises today.</p>

    <div class="message" id="message">
      <strong>May your day be filled with:</strong>
      <ul>
        <li>Sweet moments</li>
        <li>Big smiles</li>
        <li>Memories to cherish forever</li>
      </ul>
    </div>

    <div class="cta-row">
      <button class="btn" id="partyBtn">Celebrate üéà</button>
      <button class="btn btn-outline" id="shareBtn">Copy Link</button>
    </div>

    <!-- New action buttons -->
    <div class="action-row" style="margin-top:10px">
      <button class="btn-secondary" id="blowBtn" title="Blow out the candles">Blow Candles üí®</button>
      <button class="btn-secondary" id="cutBtn" title="Cut the cake">Cut Cake üç∞</button>
    </div>

    <div class="footer">Tip: change the name and message in the HTML to personalize.</div>
  </div>

  <div class="right" aria-hidden="true">
    <div class="balloon b1"></div>
    <div class="balloon b2"></div>
    <div class="balloon b3"></div>
    <div class="balloon b4"></div>

    <!-- cake SVG with identifiable flames and slice group -->
    <svg class="cake" viewBox="0 0 300 260" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Birthday cake">
      <defs>
        <!-- subtle gradient for slice -->
        <linearGradient id="sliceGrad" x1="0" x2="1">
          <stop offset="0" stop-color="#fff2f0"/>
          <stop offset="1" stop-color="#ffdede"/>
        </linearGradient>
      </defs>

      <!-- base plate -->
      <ellipse cx="150" cy="246" rx="110" ry="8" fill="rgba(0,0,0,0.08)"/>
      <!-- cake main group -->
      <g id="cakeMain">
        <!-- cake bottom layer -->
        <rect class="cake-layer" x="48" y="120" width="204" height="80" rx="18" fill="#fff8f6" stroke="#ffdeda" stroke-width="2"/>
        <!-- frosting -->
        <path d="M48 120c20-26 58-26 102-26s82 0 102 26v6H48v-6z" fill="#ffdede"/>
        <!-- decorations -->
        <circle cx="120" cy="170" r="6" fill="#ffb4b4"/>
        <circle cx="180" cy="155" r="5" fill="#ffd6a5"/>
        <circle cx="88" cy="150" r="6" fill="#c9f0e1"/>
      </g>

      <!-- candles group -->
      <g id="candles" transform="translate(56,52)">
        <!-- candle 1 -->
        <g transform="translate(0,44)">
          <rect width="8" height="36" rx="2" fill="#ff9f1c"/>
          <g class="flame" id="flame1" transform="translate(4,0)">
            <path d="M4 0c3-5 6-8 4-14 2 6 6 8 4 14-2 6-8 6-8 0z" fill="#ffd166"/>
          </g>
        </g>

        <!-- candle 2 -->
        <g transform="translate(36,44)">
          <rect width="8" height="36" rx="2" fill="#7b2cbf"/>
          <g class="flame" id="flame2" transform="translate(4,0)">
            <path d="M4 0c3-5 6-8 4-14 2 6 6 8 4 14-2 6-8 6-8 0z" fill="#ffd166"/>
          </g>
        </g>

        <!-- candle 3 -->
        <g transform="translate(72,44)">
          <rect width="8" height="36" rx="2" fill="#06b58f"/>
          <g class="flame" id="flame3" transform="translate(4,0)">
            <path d="M4 0c3-5 6-8 4-14 2 6 6 8 4 14-2 6-8 6-8 0z" fill="#ffd166"/>
          </g>
        </g>
      </g>

      <!-- slice group: shaped like a triangular slice that matches cake colors -->
      <g id="slice" transform="translate(172,120)" opacity="0">
        <!-- slice body -->
        <path d="M0 0 L56 0 L28 80 L0 0" fill="url(#sliceGrad)" stroke="#ffd2cc" stroke-width="1" />
        <!-- inner filling -->
        <path d="M6 6 L50 6 L28 68 L6 6" fill="#fff4f2" opacity="0.95"/>
        <!-- sprinkle -->
        <circle cx="24" cy="30" r="3" fill="#ffb4b4"/>
      </g>
    </svg>

    <div class="shadow" aria-hidden="true"></div>

    <!-- crumb placeholders -->
    <div id="crumb1" class="crumb" style="left:58%; bottom:28%; background:#ffb199"></div>
    <div id="crumb2" class="crumb" style="left:65%; bottom:32%; background:#ffd166"></div>
    <div id="crumb3" class="crumb" style="left:72%; bottom:30%; background:#9b5de5"></div>
  </div>
</div>

<script>
/* ---------- PERSONALIZE HERE ---------- */
const PERSON_NAME = "Asha";          // change the name shown
const SUBTITLE = "May your year sparkle with joy and success!";
const MESSAGE_ITEMS = ["Health and happiness","Lots of laughter","Dreams coming true"];
/* -------------------------------------- */

document.getElementById('name').textContent = PERSON_NAME;
document.getElementById('subtitle').textContent = SUBTITLE;
const msg = document.getElementById('message');
msg.innerHTML = "<strong>Today's wishes:</strong><ul>" + MESSAGE_ITEMS.map(i => "<li>" + i + "</li>").join("") + "</ul>";

/* ---------- Confetti Canvas (keeps working) ---------- */
const canvas = document.getElementById('confetti');
const ctx = canvas.getContext('2d');
function resize(){ canvas.width = innerWidth; canvas.height = innerHeight; }
resize(); window.addEventListener('resize', resize);

let pieces = [];
const colors = ['#FF6B6B','#FFD166','#06D6A0','#9B5DE5','#FFB199'];
function resetPieces(count=110){
  pieces = Array.from({length:count}).map(()=>{
    return {
      x: Math.random()*canvas.width,
      y: -Math.random()*canvas.height,
      w: 6 + Math.random()*10,
      h: 6 + Math.random()*12,
      r: Math.random()*360,
      velX: -0.5 + Math.random()*1.5,
      velY: 1 + Math.random()*3.5,
      spin: -3 + Math.random()*6,
      color: colors[Math.floor(Math.random()*colors.length)],
      opacity: 0.9
    };
  });
}
resetPieces();

let last = performance.now();
let animFrame = null;
function animate(now){
  const dt = (now - last) / 1000;
  last = now;
  ctx.clearRect(0,0,canvas.width,canvas.height);
  pieces.forEach(p=>{
    p.x += p.velX * (60*dt);
    p.y += p.velY * (60*dt);
    p.r += p.spin * dt;
    ctx.save();
    ctx.translate(p.x, p.y);
    ctx.rotate(p.r * Math.PI/180);
    ctx.globalAlpha = p.opacity;
    ctx.fillStyle = p.color;
    ctx.fillRect(-p.w/2, -p.h/2, p.w, p.h);
    ctx.restore();
    if(p.y > canvas.height + 40) {
      p.y = -20 - Math.random()*200;
      p.x = Math.random()*canvas.width;
    }
  });
  animFrame = requestAnimationFrame(animate);
}
animFrame = requestAnimationFrame(animate);

/* ---------- Buttons ---------- */
document.getElementById('partyBtn').addEventListener('click', ()=>{
  const cake = document.querySelector('.cake');
  cake.animate([{ transform: 'scale(1)' }, { transform: 'scale(1.06)' }, { transform: 'scale(1)' }], { duration: 700, easing: 'cubic-bezier(.2,.9,.2,1)' });
  resetPieces();
});

/* copy link */
document.getElementById('shareBtn').addEventListener('click', async ()=>{
  try{
    await navigator.clipboard.writeText(location.href);
    const old = document.getElementById('shareBtn').textContent;
    document.getElementById('shareBtn').textContent = 'Copied!';
    setTimeout(()=> document.getElementById('shareBtn').textContent = old, 1600);
  }catch(e){
    alert('Could not copy ‚Äî your browser may block clipboard access. Manually share the link: ' + location.href);
  }
});

/* --------- Blow Candles feature --------- */
let candlesLit = true;
const blowBtn = document.getElementById('blowBtn');
const candlesGroup = document.getElementById('candles');

blowBtn.addEventListener('click', ()=>{
  if(!candlesLit) return; // already blown
  candlesLit = false;
  // add class to extinguish flames (CSS takes care)
  candlesGroup.classList.add('extinguished');

  // quick small puff visual: translate and fade small flames (not DOM heavy)
  // subtle page feedback
  blowBtn.textContent = "Blown ‚ú®";
  blowBtn.disabled = true;

  // slight confetti puff to celebrate
  resetPieces(36);
  setTimeout(()=> resetPieces(), 1400);
});

/* --------- Cut Cake feature --------- */
let cakeCut = false;
const cutBtn = document.getElementById('cutBtn');
const scene = document.querySelector('.scene');
const slice = document.getElementById('slice');
const crumbEls = [document.getElementById('crumb1'), document.getElementById('crumb2'), document.getElementById('crumb3')];

cutBtn.addEventListener('click', ()=>{
  if(cakeCut) return;
  cakeCut = true;
  cutBtn.textContent = "Cut ‚úÖ";
  cutBtn.disabled = true;

  // reveal slice (set opacity then animate transform by toggling class on scene)
  slice.style.opacity = "1";
  // small delay for visible reveal then animate
  setTimeout(()=> {
    scene.classList.add('slice-removed');

    // animate slice movement via transform (CSS class handles transform)
    // show crumbs
    crumbEls.forEach((c,i)=>{
      setTimeout(()=> c.classList.add('show'), 220 + i*120);
    });

    // burst confetti more
    resetPieces(200);

    // small crumb fade-out later
    setTimeout(()=> {
      crumbEls.forEach(c=> c.classList.remove('show'));
    }, 3000);

  }, 120);

});

/* ---------- Accessibility: reduce motion handling ---------- */
if (window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
  document.querySelectorAll('.balloon').forEach(b=> b.style.animation = 'none');
  document.querySelectorAll('.flame').forEach(f=> f.style.animation = 'none');
  cancelAnimationFrame(animFrame);
  ctx.clearRect(0,0,canvas.width,canvas.height);
}
</script>
</body>
</html>